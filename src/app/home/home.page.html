<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Αρχική</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  <!-- Logged In User Info -->
  <ng-container *ngIf="isLoggedIn; else notLoggedIn">
    <ion-card>
      <ion-card-header>
        <ion-card-title>Καλώς ήρθες, {{ userEmail }}</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-button expand="block" color="danger" (click)="logout()">Αποσύνδεση</ion-button>
        <ion-button expand="block" color="secondary" routerLink="/order-history">
          Ιστορικό Αγορών
        </ion-button>
        <ion-button expand="block" color="tertiary" routerLink="/wishlist">
          Λίστα Επιθυμιών 💖
        </ion-button>
      </ion-card-content>
    </ion-card>
  </ng-container>

  <!-- Not Logged In -->
  <ng-template #notLoggedIn>
    <ion-card>
      <ion-card-header>
        <ion-card-title>Καλώς ήρθες!</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-button expand="block" color="primary" (click)="goToLogin()">Σύνδεση</ion-button>
        <ion-button expand="block" color="medium" (click)="goToRegister()">Εγγραφή</ion-button>
      </ion-card-content>
    </ion-card>
  </ng-template>

  <!-- Categories -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>Κατηγορίες Προϊόντων</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-grid>
        <ion-row>
          <ion-col size="6" sizeMd="3">
            <ion-button expand="block" fill="outline" routerLink="/category/fresh">
              🥬 Φρέσκα τρόφιμα
            </ion-button>
          </ion-col>
          <ion-col size="6" sizeMd="3">
            <ion-button expand="block" fill="outline" routerLink="/category/dairy">
              🧀 Γαλακτοκομικά
            </ion-button>
          </ion-col>
          <ion-col size="6" sizeMd="3">
            <ion-button expand="block" fill="outline" routerLink="/category/frozen">
              ❄️ Κατεψυγμένα
            </ion-button>
          </ion-col>
          <ion-col size="6" sizeMd="3">
            <ion-button expand="block" fill="outline" routerLink="/category/cleaning">
              🧽 Καθαριστικά
            </ion-button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-card-content>
  </ion-card>

  <!-- View All Products -->
<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Προϊόντα</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  <!-- Category Filter Buttons -->
  <ion-segment [(ngModel)]="selectedCategory" (ionChange)="filterByCategory(selectedCategory)">
    <ion-segment-button *ngFor="let cat of categories" [value]="cat">
      {{ cat }}
    </ion-segment-button>
  </ion-segment>

  <!-- Products List -->
  <ion-grid>
    <ion-row>
      <ion-col size="12" size-md="6" size-lg="4" *ngFor="let product of filteredProducts">
        <ion-card button [routerLink]="['/product-detail', product.id]">
          <ion-card-header>
            <ion-card-title>{{ product.title }}</ion-card-title>
            <ion-card-subtitle>{{ product.price }} €</ion-card-subtitle>
          </ion-card-header>
          <ion-card-content>
            <p>{{ product.description }}</p>
            <p *ngIf="!product.availability" style="color:red;">Μη διαθέσιμο</p>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>

</ion-content>

</ion-content>
